#! /usr/bin/env ./node_modules/.bin/coffee
# vi:ft=coffee

collections =
  normal:
    elites:     (x for x in [401..475])
    ultraRares: (x for x in [301..375])
    rares:      (x for x in [1..75])
    uncommons:  (x for x in [101..250])
    commons:    (x for x in [501..750])
  timeBased:
    elites:     (x for x in [837..840])
    ultraRares: (x for x in [831..836])
    rares:      (x for x in [821..830])
    uncommons:  (x for x in [801..820])
    commons:    (x for x in [751..800])
  geographyBased:
    elites:     (x for x in [897..900])
    ultraRares: (x for x in [891..896])
    rares:      (x for x in [881..890])
    uncommons:  (x for x in [871..880])
    commons:    (x for x in [840..870])

timeRanges = [
  0     # Midnight
  60    # 1 AM
  180   # 3 AM
  420   # 7 AM
  720   # Noon
  1200  # 8 PM
  1320  # 10 PM
  1380  # 11 PM
  1425  # 11:45 PM
  1438  # 11:58 PM
]

thingsAvailableAtTime = [
  () -> 1  # Midnight
  () -> 2  # 1 AM
  () -> 3  # 3 AM
  () -> 4  # 7 AM
  () -> 5  # Noon
  () -> 6  # 8 PM
  () -> 7  # 10 PM
  () -> 8  # 11 PM
  () -> 9  # 11:45 PM
  () -> 10 # 11:58 PM
]
  
getSomethingForCurrentTime = ->
  now = new Date()
  minutesSinceMidnight = (now.getHours() * 60) + now.getMinutes()
  numRanges = timeRanges.length
  myIndex = null
  for v,i in timeRanges
    break unless minutesSinceMidnight > v
    myIndex = i
  
  thingsAvailableAtTime[myIndex]()
  


console.log getSomethingForCurrentTime()
